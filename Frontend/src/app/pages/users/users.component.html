<div class="users-page">
    <h1>Users</h1>
    <button class="add-user-button" (click)="toggleAddUserForm()">{{ this.isAddingUser ? 'Close' : 'Add User' }}</button>
    @if (this.isAddingUser) {
        <app-add-user-form (afterSubmit)="afterAddUser()"></app-add-user-form>
    }
    <div class="users-container">
        <div class="users-list">
            <div class="users-header">
                <div class="col-name">Name</div>
                <div class="col-email">Email</div>
                <div class="col-dob">Date of Birth</div>
                <div class="col-status">Status</div>
                <div class="col-id">AccountID</div>
                <div class="col-actions">Actions</div>
            </div>
            
            @for (user of users; track user.id) {
                <div class="user-row">
                    <div class="col-name" data-label="Name">
                        <span class="user-name">{{ user.firstName }} {{ user.secondName }} {{ user.lastName }}</span>
                    </div>
                    <div class="col-email" data-label="Email">
                        <span class="user-email">{{ user.email }}</span>
                    </div>
                    <div class="col-dob" data-label="Date of Birth">
                        <span class="user-dob">{{ user.dateOfBirth | date:'MMM dd, yyyy' }}</span>
                    </div>
                    <div class="col-status" data-label="Status">
                        <span class="user-status" [class.deleted]="user.isDeleted">
                            {{ user.isDeleted ? 'Deleted' : 'Active' }}
                        </span>
                    </div>
                    <div class="col-id" data-label="ID">
                        <span class="user-id">{{ user.bankAccountId }}</span>
                    </div>
                    <div class="col-actions" data-label="Actions">
                        @if (!user.isDeleted) {
                            <button class="action"(click)="updateUser(user.id)">Update</button>
                            <button class="action"(click)="deleteUser(user.id)">Delete</button>
                        }
                    </div>
                </div>
            }
        </div>
    </div>
</div>