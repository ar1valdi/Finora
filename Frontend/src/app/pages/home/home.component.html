
<div class="home-container">
  <div *ngIf="!currentUser" class="welcome-section">
    <h1>Finora</h1>
  </div>

  <div *ngIf="currentUser" class="user-dashboard">
    <h1>Welcome, {{ currentUser.firstName }} {{ currentUser.lastName }}!</h1>
    
    <div class="action-buttons">
      <a routerLink="/transfer" class="transfer-btn">Transfer Money</a>
    </div>
    
    <div class="transactions-section">
      <h2>Transaction History</h2>
      
      <div *ngIf="loading" class="loading">
        Loading transactions...
      </div>
      
      <div *ngIf="!loading && transactions.length === 0" class="no-transactions">
        No transactions found.
      </div>
      
      <div *ngIf="!loading && transactions.length > 0" class="transactions-table-container">
        <table class="transactions-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>From Account</th>
              <th>To Account</th>
              <th>Amount</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let transaction of transactions">
              <td>{{ transaction.transactionDate | date:'short' }}</td>
              <td class="account-id">{{ transaction.fromBankAccountId }}</td>
              <td class="account-id">{{ transaction.toBankAccountId }}</td>
              <td class="amount" 
              [class.positive]="transaction.amount > 0 && (transaction.toBankAccountId === currentUser!.bankAccountId || !transaction.toBankAccountId)" 
              [class.negative]="transaction.amount < 0 || (transaction.fromBankAccountId === currentUser!.bankAccountId && transaction.toBankAccountId)">
                @if (transaction.toBankAccountId && transaction.toBankAccountId !== currentUser!.bankAccountId) {
                  -{{ transaction.amount | currency }}
                } @else {
                  {{ transaction.amount | currency }}
                }
              </td>
              <td>{{ transaction.description || '-' }}</td>
            </tr>
          </tbody>
        </table>
        
        <div class="pagination" *ngIf="totalPages > 1">
          <button 
            class="pagination-btn" 
            [disabled]="currentPage === 1" 
            (click)="previousPage()">
            Previous
          </button>
          
          <button 
            *ngFor="let page of getPageNumbers()" 
            class="pagination-btn page-number"
            [class.active]="page === currentPage"
            (click)="goToPage(page)">
            {{ page }}
          </button>
          
          <button 
            class="pagination-btn" 
            [disabled]="currentPage === totalPages" 
            (click)="nextPage()">
            Next
          </button>
        </div>
        
        <div class="pagination-info">
          Showing {{ (currentPage - 1) * pageSize + 1 }} to {{ getEndIndex() }} 
          of {{ totalTransactions }} transactions
        </div>
      </div>
    </div>
  </div>
</div>